var d=(e,g,o)=>new Promise((t,l)=>{var m=i=>{try{s(o.next(i))}catch(a){l(a)}},n=i=>{try{s(o.throw(i))}catch(a){l(a)}},s=i=>i.done?t(i.value):Promise.resolve(i.value).then(m,n);s((o=o.apply(e,g)).next())});(function(){var g;"use strict";const e=document.getElementById("mx_login_btn");if(e){const o=e.getElementsByTagName("i"),t=o?o[0]:null,l=document.getElementsByClassName("mx-title")[0],m=(g=l.textContent)!=null?g:l.innerText;if(window.MxElectronAPI){let n;const s=()=>{l.innerText=m+` <${n&&n.username&&n.username!=="游客"?n.username:"未登录"}${n&&n.vip===1?" ,会员":n&&n.vip&&n.vip!==0?" ,非会员":""}>`};e.onclick=()=>d(this,null,function*(){(n==null?void 0:n.vip)===0||!n?window.MxElectronAPI.loginPlugin.login():window.MxElectronAPI.loginPlugin.logout()});const i=()=>{e&&(s(),e.nextElementSibling.getElementsByClassName("v-overlay__content")[0].textContent="退出登录",t&&t.classList.add("mdi-logout"),t&&t.classList.remove("mdi-login"))},a=()=>{e&&(s(),e.nextElementSibling.getElementsByClassName("v-overlay__content")[0].textContent="登录",t&&t.classList.remove("mdi-logout"),t&&t.classList.add("mdi-login"))},r=c=>d(this,null,function*(){console.log("_userInfo",c),c||(c=yield window.MxElectronAPI.loginPlugin.getUserInfo()),n=c,c&&(c.vip===0?a():i())});window.MxElectronAPI.loginPlugin.onupdateUserInfo(r),r()}else e.onclick=()=>{window.open("https://c.mxdraw3d.com/login")}}})();
