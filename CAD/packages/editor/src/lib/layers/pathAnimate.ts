import vjmap from 'vjmap';
import type MapApp from '~/MapApp';
import { listMapImages } from '../utils';
import basic from './basic';
import common from './data'
import option  from './option';
import arrowLine from './arrowLine'
import symbol from './symbol'
export default {
    name: '路径动画',
    title: '路径动画设置',
    collapse: "线图层",
    matchSource: ['geojson', 'vector'], /* 匹配的数据源 */
    icon: `M717.074286 423.076571c14.573714 3.84 25.709714 3.84 36.845714-2.998857 11.154286-6.857143 17.152-15.853714 21.010286-30.427428l36.004571-142.72c4.699429-17.993143-5.156571-35.145143-23.149714-39.424-17.572571-4.717714-36.004571 5.12-39.862857 23.570285l-17.993143 76.708572-116.150857-206.994286c-21.851429-39.424-61.275429-59.574857-101.558857-59.574857a117.229714 117.229714 0 0 0-102.016 59.574857l-118.272 211.273143c-10.715429 19.291429-4.717714 37.723429 11.574857 47.579429 17.133714 9.435429 37.284571 3.437714 47.140571-13.714286l118.272-212.150857c9.874286-17.133714 26.587429-24.411429 43.300572-24.411429 16.713143 0 32.987429 7.277714 42.422857 24.411429l117.851428 210.432-79.286857-23.570286c-17.993143-5.577143-35.565714 4.717714-40.283428 22.710857-5.138286 17.152 4.297143 34.724571 22.710857 39.862857zM182.217143 867.072h229.705143c20.150857 0 35.145143-14.134857 35.145143-33.426286 0-19.291429-14.994286-33.865143-35.145143-33.865143H182.637714c-29.568 0-49.28-24.429714-49.28-50.998857 0-7.716571 1.28-17.133714 5.997715-25.289143l109.714285-196.278857 17.993143 76.708572c3.858286 18.432 22.308571 28.288 39.862857 23.588571 17.993143-4.297143 28.288-21.430857 23.149715-39.442286l-36.022858-142.701714c-3.84-14.153143-9.837714-24.009143-20.973714-30.445714-11.154286-6.857143-21.869714-7.277714-36.443428-2.998857l-141.421715 39.862857c-18.852571 5.138286-28.288 22.710857-23.149714 39.862857 4.717714 17.993143 22.290286 28.708571 40.283429 22.710857l79.286857-23.588571-111.414857 199.734857c-10.715429 18.852571-16.292571 39.003429-16.292572 58.276571 0 66.432 45.421714 118.290286 118.290286 118.290286z m448.713143 101.997714c13.275429 13.714286 33.426286 12.854857 46.281143 0 12.854857-12.434286 12.854857-33.005714-0.859429-46.281143l-58.697143-55.716571h224.128c72.868571 0 118.290286-51.858286 118.290286-118.290286 0-19.273143-5.138286-39.003429-15.853714-58.276571l-113.152-202.715429c-10.276571-18.432-29.988571-22.710857-46.72-12.854857-16.713143 9.856-22.272 29.988571-12.854858 47.140572l113.152 201.417142c4.278857 8.155429 6.418286 17.572571 6.418286 25.289143 0 26.569143-20.571429 51.017143-50.139428 51.017143h-223.268572l58.697143-55.296c13.714286-13.293714 13.714286-33.865143 0.859429-46.281143-12.854857-13.293714-33.005714-13.714286-46.281143 0l-104.996572 101.997715c-10.715429 10.276571-15.872 20.571429-15.872 33.426285 0 12.854857 5.156571 22.710857 15.872 32.987429z`,
    factory: (data: any, form: any, mapApp: MapApp): any => {
        const arrowLineFactory = arrowLine.factory(data, form, mapApp);
        const symbolFactory = symbol.factory(data, form, mapApp);
        return {
            option: {...option},
            expanded: ["通用设置",  "绘制设置", "箭头设置", "线设置", "线边框设置","图标设置","文本设置","符号设置"],
            default: {
                lineWidth: 10,
                showDir: true,
                showBorder: true,
                borderColor: "#f00",
                lineColor: '#FF9900'
            },
            rule: [
                ...basic(data, form, mapApp),
                ...common(data, form, mapApp),
                ...arrowLineFactory.rule.filter((r: any) => (r.collapse == "箭头设置" || r.collapse == "线设置" || r.collapse == "线边框设置")),
                ...symbolFactory.rule.filter((r: any) => (r.collapse == "图标设置" || r.collapse == "文本设置" || r.collapse == "符号设置")),
                {
                    type: 'exprComp',
                    field: 'fps',
                    title: '每秒帧数',
                    collapse: "线设置",  
                    value: data.fps,
                    info: '每秒运行多少帧，fps，默认10, 把线段分成了100段, 每一秒跑多少段',
                    props: {
                        childType: "InputNumber",
                        hideExprButton: true,
                        disableAutoSwitchComp: true,
                        step: 1,
                        min: 1,
                        max: 100
                    }
                },
            ]
        }
    }
};