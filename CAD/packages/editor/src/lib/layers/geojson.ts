import vjmap from 'vjmap';
import type MapApp from '~/MapApp';
import { listMapImages } from '../utils';
import basic from './basic';
import common from './data'
import option  from './option';
import fill from './fill'
import line from './line'
import circle from './circle'
export default {
    name: 'Geojson点面线',
    title: 'Geojson点面线设置',
    collapse: "其他图层",
    matchSource: ['geojson', 'vector'], /* 匹配的数据源 */
    icon: `M497.066667 558.933333c0 38.4 21.333333 66.133333 57.6 66.133334s57.6-27.733333 57.6-68.266667c0-36.266667-21.333333-68.266667-57.6-68.266667-36.266667 2.133333-57.6 32-57.6 70.4z M853.333333 384h-42.666666v-44.8L597.333333 128H292.266667C247.466667 128 213.333333 166.4 213.333333 213.333333v170.666667H170.666667c-23.466667 0-42.666667 19.2-42.666667 42.666667v256c0 23.466667 19.2 42.666667 42.666667 42.666666h42.666666v85.333334c0 46.933333 36.266667 85.333333 78.933334 85.333333h437.333333c44.8 0 78.933333-38.4 78.933333-85.333333v-85.333334h42.666667c23.466667 0 42.666667-19.2 42.666667-42.666666V426.666667c2.133333-23.466667-17.066667-42.666667-40.533334-42.666667z m-569.6 196.266667c0 57.6-27.733333 81.066667-76.8 81.066666-10.666667 0-27.733333-2.133333-38.4-6.4l6.4-36.266666c6.4 2.133333 17.066667 4.266667 27.733334 4.266666 21.333333 0 34.133333-10.666667 34.133333-42.666666v-123.733334h46.933333v123.733334zM298.666667 234.666667c0-12.8 8.533333-21.333333 19.2-21.333334H597.333333v85.333334c0 23.466667 19.2 42.666667 42.666667 42.666666l83.2-2.133333v42.666667h-426.666667V234.666667h2.133334z m362.666666 322.133333c0 61.866667-44.8 106.666667-110.933333 106.666667-64 0-104.533333-44.8-104.533333-102.4 0-61.866667 44.8-106.666667 108.8-106.666667 66.133333-2.133333 106.666667 42.666667 106.666666 102.4z m-302.933333 17.066667c-36.266667-10.666667-61.866667-27.733333-61.866667-59.733334 0-34.133333 32-61.866667 81.066667-61.866666 25.6 0 44.8 4.266667 57.6 10.666666l-10.666667 38.4c-8.533333-4.266667-25.6-10.666667-46.933333-10.666666s-29.866667 8.533333-29.866667 19.2c0 12.8 12.8 19.2 40.533334 27.733333 38.4 12.8 57.6 29.866667 57.6 61.866667s-25.6 64-85.333334 64c-25.6 0-51.2-6.4-64-14.933334l10.666667-38.4c12.8 6.4 34.133333 14.933333 55.466667 14.933334s34.133333-8.533333 34.133333-21.333334c-2.133333-14.933333-10.666667-21.333333-38.4-29.866666zM725.333333 789.333333c0 12.8-8.533333 21.333333-19.2 21.333334H317.866667c-10.666667 0-19.2-8.533333-19.2-21.333334v-64h426.666666v64z m128-132.266666h-51.2l-46.933333-78.933334c-12.8-23.466667-27.733333-49.066667-40.533333-74.666666h-2.133334c2.133333 29.866667 2.133333 55.466667 2.133334 87.466666v66.133334h-44.8v-200.533334h59.733333l44.8 72.533334c14.933333 23.466667 25.6 49.066667 36.266667 72.533333-4.266667-27.733333-4.266667-53.333333-4.266667-81.066667v-64h44.8v200.533334h2.133333z`,
    factory: (data: any, form: any, mapApp: MapApp): any => {
        const fillFactory = fill.factory(data, form, mapApp);
        const lineFactory = line.factory(data, form, mapApp);
        const circleFactory = circle.factory(data, form, mapApp);
        return {
            option: {...option},
            expanded: ["通用设置", "填充设置", "线设置", "符号设置"],
            default: {
                fillColor: "#00ffff",
                fillOutlineColor: "#00ff00",
                lineColor: '#ff0000',
                lineWidth: 1,
                circleRadius: 5,
                circleColor: "#ffff00",
            },
            rule: [
                ...basic(data, form, mapApp),
                ...common(data, form, mapApp),
                ...fillFactory.rule.filter((r: any) => (r.field.indexOf("fill") == 0)).map((r: any) => { r.collapse = "填充设置"; return r}),
                ...lineFactory.rule.filter((r: any) => (r.field.indexOf("line") == 0)).map((r: any) => { r.collapse = "线设置"; return r}),
                ...circleFactory.rule.filter((r: any) => (r.field.indexOf("circle") == 0)).map((r: any) => { r.collapse = "符号设置"; return r}),
            ]
        }
    }
};